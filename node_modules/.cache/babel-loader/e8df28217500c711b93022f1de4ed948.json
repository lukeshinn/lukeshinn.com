{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/lukeshinn/repos/samples-js-react/okta-hosted-login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/lukeshinn/repos/samples-js-react/okta-hosted-login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */import{useOktaAuth}from'@okta/okta-react';import React from'react';import{Link}from'react-router-dom';import{Container,Icon,Image,Menu}from'semantic-ui-react';var Navbar=function Navbar(_ref){var setCorsErrorModalOpen=_ref.setCorsErrorModalOpen;var _useOktaAuth=useOktaAuth(),authState=_useOktaAuth.authState,oktaAuth=_useOktaAuth.oktaAuth;// Note: Can't distinguish CORS error from other network errors\nvar isCorsError=function isCorsError(err){return err.name==='AuthApiError'&&!err.errorCode&&err.xhr.message==='Failed to fetch';};var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",oktaAuth.signInWithRedirect());case 1:case\"end\":return _context.stop();}}},_callee);}));return function login(){return _ref2.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return oktaAuth.signOut();case 3:_context2.next=12;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);if(!isCorsError(_context2.t0)){_context2.next=11;break;}setCorsErrorModalOpen(true);_context2.next=12;break;case 11:throw _context2.t0;case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function logout(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Menu,{fixed:\"top\",inverted:true,children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Menu.Item,{header:true,children:[/*#__PURE__*/_jsx(Image,{size:\"mini\",src:\"/react.svg\"}),\"\\xA0\",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Okta-React Sample Project\"})]}),authState.isAuthenticated&&/*#__PURE__*/_jsxs(Menu.Item,{id:\"messages-button\",children:[/*#__PURE__*/_jsx(Icon,{name:\"mail outline\"}),/*#__PURE__*/_jsx(Link,{to:\"/messages\",children:\"Messages\"})]}),authState.isAuthenticated&&/*#__PURE__*/_jsx(Menu.Item,{id:\"profile-button\",children:/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:\"Profile\"})}),authState.isAuthenticated&&/*#__PURE__*/_jsx(Menu.Item,{id:\"logout-button\",onClick:logout,children:\"Logout\"}),!authState.isPending&&!authState.isAuthenticated&&/*#__PURE__*/_jsx(Menu.Item,{onClick:login,children:\"Login\"})]})})});};export default Navbar;","map":{"version":3,"sources":["/Users/lukeshinn/repos/samples-js-react/okta-hosted-login/src/Navbar.jsx"],"names":["useOktaAuth","React","Link","Container","Icon","Image","Menu","Navbar","setCorsErrorModalOpen","authState","oktaAuth","isCorsError","err","name","errorCode","xhr","message","login","signInWithRedirect","logout","signOut","isAuthenticated","isPending"],"mappings":"qbAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,OAASA,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,SAAT,CAAoBC,IAApB,CAA0BC,KAA1B,CAAiCC,IAAjC,KAA6C,mBAA7C,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAA+B,IAA5BC,CAAAA,qBAA4B,MAA5BA,qBAA4B,kBACZR,WAAW,EADC,CACpCS,SADoC,cACpCA,SADoC,CACzBC,QADyB,cACzBA,QADyB,CAG5C;AACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,GAAD,QAAUA,CAAAA,GAAG,CAACC,IAAJ,GAAa,cAAb,EAA+B,CAACD,GAAG,CAACE,SAApC,EAAiDF,GAAG,CAACG,GAAJ,CAAQC,OAAR,GAAoB,iBAA/E,EAApB,CAEA,GAAMC,CAAAA,KAAK,2FAAG,mKAAYP,QAAQ,CAACQ,kBAAT,EAAZ,wDAAH,kBAALD,CAAAA,KAAK,2CAAX,CAEA,GAAME,CAAAA,MAAM,2FAAG,gLAELT,CAAAA,QAAQ,CAACU,OAAT,EAFK,+FAIPT,WAAW,cAJJ,2BAKTH,qBAAqB,CAAC,IAAD,CAArB,CALS,yHAAH,kBAANW,CAAAA,MAAM,2CAAZ,CAYA,mBACE,kCACE,KAAC,IAAD,EAAM,KAAK,CAAC,KAAZ,CAAkB,QAAQ,KAA1B,uBACE,MAAC,SAAD,yBACE,MAAC,IAAD,CAAM,IAAN,EAAW,MAAM,KAAjB,wBACE,KAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,GAAG,CAAC,YAAvB,EADF,qBAGE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uCAHF,GADF,CAMGV,SAAS,CAACY,eAAV,eACD,MAAC,IAAD,CAAM,IAAN,EAAW,EAAE,CAAC,iBAAd,wBACE,KAAC,IAAD,EAAM,IAAI,CAAC,cAAX,EADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sBAFF,GAPF,CAYGZ,SAAS,CAACY,eAAV,eACC,KAAC,IAAD,CAAM,IAAN,EAAW,EAAE,CAAC,gBAAd,uBACE,KAAC,IAAD,EAAM,EAAE,CAAC,UAAT,qBADF,EAbJ,CAiBGZ,SAAS,CAACY,eAAV,eACC,KAAC,IAAD,CAAM,IAAN,EAAW,EAAE,CAAC,eAAd,CAA8B,OAAO,CAAEF,MAAvC,oBAlBJ,CAoBG,CAACV,SAAS,CAACa,SAAX,EAAwB,CAACb,SAAS,CAACY,eAAnC,eACC,KAAC,IAAD,CAAM,IAAN,EAAW,OAAO,CAAEJ,KAApB,mBArBJ,GADF,EADF,EADF,CA8BD,CAlDD,CAmDA,cAAeV,CAAAA,MAAf","sourcesContent":["/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { useOktaAuth } from '@okta/okta-react';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Container, Icon, Image, Menu } from 'semantic-ui-react';\n\nconst Navbar = ({ setCorsErrorModalOpen }) => {\n  const { authState, oktaAuth } = useOktaAuth();\n\n  // Note: Can't distinguish CORS error from other network errors\n  const isCorsError = (err) => (err.name === 'AuthApiError' && !err.errorCode && err.xhr.message === 'Failed to fetch');\n\n  const login = async () => oktaAuth.signInWithRedirect();\n\n  const logout = async () => {\n    try {\n      await oktaAuth.signOut();\n    } catch (err) {\n      if (isCorsError(err)) {\n        setCorsErrorModalOpen(true);\n      } else {\n        throw err;\n      }\n    }\n  };\n\n  return (\n    <div>\n      <Menu fixed=\"top\" inverted>\n        <Container>\n          <Menu.Item header>\n            <Image size=\"mini\" src=\"/react.svg\" />\n            &nbsp;\n            <Link to=\"/\">Okta-React Sample Project</Link>\n          </Menu.Item>\n          {authState.isAuthenticated && (\n          <Menu.Item id=\"messages-button\">\n            <Icon name=\"mail outline\" />\n            <Link to=\"/messages\">Messages</Link>\n          </Menu.Item>\n          )}\n          {authState.isAuthenticated && (\n            <Menu.Item id=\"profile-button\">\n              <Link to=\"/profile\">Profile</Link>\n            </Menu.Item>\n          )}\n          {authState.isAuthenticated && (\n            <Menu.Item id=\"logout-button\" onClick={logout}>Logout</Menu.Item>\n          )}\n          {!authState.isPending && !authState.isAuthenticated && (\n            <Menu.Item onClick={login}>Login</Menu.Item>\n          )}\n        </Container>\n      </Menu>\n    </div>\n  );\n};\nexport default Navbar;\n"]},"metadata":{},"sourceType":"module"}