{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/lukeshinn/repos/samples-js-react/okta-hosted-login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */import React,{useState,useEffect}from'react';import{useOktaAuth}from'@okta/okta-react';import{Header,Icon,Table}from'semantic-ui-react';var Profile=function Profile(){var _useOktaAuth=useOktaAuth(),authState=_useOktaAuth.authState,oktaAuth=_useOktaAuth.oktaAuth;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userInfo=_useState2[0],setUserInfo=_useState2[1];useEffect(function(){if(!authState.isAuthenticated){// When user isn't authenticated, forget any user info\nsetUserInfo(null);}else{oktaAuth.getUser().then(function(info){setUserInfo(info);});}},[authState,oktaAuth]);// Update if authState changes\nif(!userInfo){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Fetching user profile...\"})});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Header,{as:\"h1\",children:[/*#__PURE__*/_jsx(Icon,{name:\"drivers license\"}),' ',\"My User Profile (ID Token Claims)\",' ']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Below is the information from your ID token which was obtained during the \\xA0\",/*#__PURE__*/_jsx(\"a\",{href:\"https://developer.okta.com/docs/guides/implement-auth-code-pkce\",children:\"PKCE Flow\"}),' ',\"and is now stored in local storage.\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"This route is protected with the\",' ',/*#__PURE__*/_jsx(\"code\",{children:\"<SecureRoute>\"}),' ',\"component, which will ensure that this page cannot be accessed until you have authenticated.\"]}),/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Claim\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Value\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(userInfo).map(function(claimEntry){var claimName=claimEntry[0];var claimValue=claimEntry[1];var claimId=\"claim-\".concat(claimName);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:claimName}),/*#__PURE__*/_jsx(\"td\",{id:claimId,children:claimValue.toString()})]},claimName);})})]})]})});};export default Profile;","map":{"version":3,"sources":["/Users/lukeshinn/repos/samples-js-react/okta-hosted-login/src/Profile.jsx"],"names":["React","useState","useEffect","useOktaAuth","Header","Icon","Table","Profile","authState","oktaAuth","userInfo","setUserInfo","isAuthenticated","getUser","then","info","Object","entries","map","claimEntry","claimName","claimValue","claimId","toString"],"mappings":"wQAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,KAAvB,KAAoC,mBAApC,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,kBACYJ,WAAW,EADvB,CACZK,SADY,cACZA,SADY,CACDC,QADC,cACDA,QADC,eAEYR,QAAQ,CAAC,IAAD,CAFpB,wCAEbS,QAFa,eAEHC,WAFG,eAIpBT,SAAS,CAAC,UAAM,CACd,GAAI,CAACM,SAAS,CAACI,eAAf,CAAgC,CAC9B;AACAD,WAAW,CAAC,IAAD,CAAX,CACD,CAHD,IAGO,CACLF,QAAQ,CAACI,OAAT,GAAmBC,IAAnB,CAAwB,SAACC,IAAD,CAAU,CAChCJ,WAAW,CAACI,IAAD,CAAX,CACD,CAFD,EAGD,CACF,CATQ,CASN,CAACP,SAAD,CAAYC,QAAZ,CATM,CAAT,CAS2B;AAE3B,GAAI,CAACC,QAAL,CAAe,CACb,mBACE,kCACE,+CADF,EADF,CAKD,CAED,mBACE,kCACE,oCACE,MAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,wBACE,KAAC,IAAD,EAAM,IAAI,CAAC,iBAAX,EADF,CAEG,GAFH,qCAIG,GAJH,GADF,cAOE,mHAEE,UAAG,IAAI,CAAC,iEAAR,uBAFF,CAGG,GAHH,yCAPF,cAaE,wDAEG,GAFH,cAGE,uCAHF,CAIG,GAJH,kGAbF,cAoBE,MAAC,KAAD,yBACE,oCACE,mCACE,6BADF,cAEE,6BAFF,GADF,EADF,cAOE,uBACGM,MAAM,CAACC,OAAP,CAAeP,QAAf,EAAyBQ,GAAzB,CAA6B,SAACC,UAAD,CAAgB,CAC5C,GAAMC,CAAAA,SAAS,CAAGD,UAAU,CAAC,CAAD,CAA5B,CACA,GAAME,CAAAA,UAAU,CAAGF,UAAU,CAAC,CAAD,CAA7B,CACA,GAAMG,CAAAA,OAAO,iBAAYF,SAAZ,CAAb,CACA,mBACE,mCACE,oBAAKA,SAAL,EADF,cAEE,WAAI,EAAE,CAAEE,OAAR,UAAkBD,UAAU,CAACE,QAAX,EAAlB,EAFF,GAASH,SAAT,CADF,CAMD,CAVA,CADH,EAPF,GApBF,GADF,EADF,CA8CD,CArED,CAuEA,cAAeb,CAAAA,OAAf","sourcesContent":["/*\n * Copyright (c) 2018, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useOktaAuth } from '@okta/okta-react';\nimport { Header, Icon, Table } from 'semantic-ui-react';\n\nconst Profile = () => {\n  const { authState, oktaAuth } = useOktaAuth();\n  const [userInfo, setUserInfo] = useState(null);\n\n  useEffect(() => {\n    if (!authState.isAuthenticated) {\n      // When user isn't authenticated, forget any user info\n      setUserInfo(null);\n    } else {\n      oktaAuth.getUser().then((info) => {\n        setUserInfo(info);\n      });\n    }\n  }, [authState, oktaAuth]); // Update if authState changes\n\n  if (!userInfo) {\n    return (\n      <div>\n        <p>Fetching user profile...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div>\n        <Header as=\"h1\">\n          <Icon name=\"drivers license\" />\n          {' '}\n          My User Profile (ID Token Claims)\n          {' '}\n        </Header>\n        <p>\n          Below is the information from your ID token which was obtained during the &nbsp;\n          <a href=\"https://developer.okta.com/docs/guides/implement-auth-code-pkce\">PKCE Flow</a>\n          {' '}\n          and is now stored in local storage.\n        </p>\n        <p>\n          This route is protected with the\n          {' '}\n          <code>&lt;SecureRoute&gt;</code>\n          {' '}\n          component, which will ensure that this page cannot be accessed until you have authenticated.\n        </p>\n        <Table>\n          <thead>\n            <tr>\n              <th>Claim</th>\n              <th>Value</th>\n            </tr>\n          </thead>\n          <tbody>\n            {Object.entries(userInfo).map((claimEntry) => {\n              const claimName = claimEntry[0];\n              const claimValue = claimEntry[1];\n              const claimId = `claim-${claimName}`;\n              return (\n                <tr key={claimName}>\n                  <td>{claimName}</td>\n                  <td id={claimId}>{claimValue.toString()}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </Table>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}